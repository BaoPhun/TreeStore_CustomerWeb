<div class="p-6 bg-white rounded-lg shadow-md">
  <h2 class="text-2xl font-bold mb-4">Đặt Hàng</h2>

  <!-- Bảng sản phẩm -->
  <div class="overflow-x-auto">
    <table class="min-w-full bg-gray-100 border border-gray-300 mb-6">
      <thead>
        <tr class="bg-gray-200 text-sm md:text-base">
          <th class="py-2 px-4 border">Hình ảnh</th>
          <th class="py-2 px-4 border">Tên sản phẩm</th>
          <th class="py-2 px-4 border">Giá</th>
          <th class="py-2 px-4 border">Số lượng</th>
          <th class="py-2 px-4 border">Tổng</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of cartItems" class="hover:bg-gray-50 text-center">
          <td class="py-2 px-4 border">
            <img [src]="item.imageUrl" alt="{{ item.name }}" class="w-16 h-16 object-cover mx-auto">
          </td>
          <td class="py-2 px-4 border">{{ item.name }}</td>
          <td class="py-2 px-4 border">{{ formatCurrency(item.price) }}</td>
          <td class="py-2 px-4 border">{{ item.quantity }}</td>
          <td class="py-2 px-4 border font-semibold">{{ formatCurrency(item.price * item.quantity) }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Thông tin giao hàng -->
  <div class="shipping-info mb-6 bg-gray-100 p-4 rounded">
    <h3 class="text-xl font-semibold mb-2">Thông tin giao hàng</h3>
    <p><strong>Họ và tên:</strong> {{ shippingInfo.name }}</p>
    <p><strong>Số điện thoại:</strong> {{ shippingInfo.phone }}</p>
    <p><strong>Địa chỉ:</strong> {{ shippingInfo.address }}</p>
  </div>

  <!-- Ghi chú và mã giảm giá -->
  <div class="form-container mb-6">
    <div class="form-row flex flex-col md:flex-row gap-4">
      <div class="w-full md:w-1/2">
        <label for="note" class="block font-semibold mb-1">Ghi chú</label>
        <textarea id="note" [(ngModel)]="orderNote" name="note" placeholder="Nhập ghi chú cho đơn hàng" class="w-full p-2 border border-gray-300 rounded"></textarea>
      </div>

      <div class="w-full md:w-1/2">
        <label for="promotionCode" class="block font-semibold mb-1">Mã giảm giá</label>
        <div class="flex gap-2">
          <input type="text" id="promotionCode" [(ngModel)]="promotionCode" name="promotionCode" placeholder="Nhập mã giảm giá" class="w-full p-2 border border-gray-300 rounded">
          <button (click)="checkPromotionCode()" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition">Áp mã</button>
        </div>
        <p *ngIf="!isPromotionValid" class="text-red-500 mt-1">Mã giảm giá không hợp lệ.</p>
      </div>
    </div>
  </div>

  <!-- Hiển thị tổng tiền và giá trị giảm giá -->
  <div class="order-total bg-gray-100 p-4 rounded">
    <h3 class="text-lg font-semibold mb-2">Tổng cộng: <span class="text-green-600 font-bold">{{ formatCurrency(total) }}</span></h3>

    <p *ngIf="discountAmount > 0" class="text-green-600 font-semibold">
      Giảm giá: {{ formatCurrency(discountAmount) }}
    </p>

    <button (click)="submitOrder()" class="mt-4 w-full md:w-auto bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition">
      Xác nhận đơn hàng
    </button>
  </div>
</div>

<!-- Container chính -->
<div class="max-w-6xl mx-auto mt-10 px-2">
  <div class="overflow-x-auto shadow-lg rounded-lg bg-white">
    <table class="w-full border-collapse text-left text-xs sm:text-sm md:text-base">
      <thead class="bg-gray-100 text-gray-700">
        <tr>
          <th class="px-3 py-3 md:px-6 md:py-4">Ngày đặt</th>
          <th class="px-3 py-3 md:px-6 md:py-4">Trạng thái</th>
          <th class="px-3 py-3 md:px-6 md:py-4">Thanh toán</th> <!-- ✅ Cột mới -->
          <th class="px-3 py-3 md:px-6 md:py-4">Tổng giá</th>
          <th class="px-3 py-3 md:px-6 md:py-4 text-center">Thao tác</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let order of paginatedOrders" class="border-b hover:bg-gray-50">
          <!-- Ngày đặt -->
          <td class="px-3 py-3 md:px-6 md:py-4">
            {{ order.orderDate || 'Chưa có ngày đặt' }}
          </td>

          <!-- Trạng thái -->
          <td class="px-3 py-3 md:px-6 md:py-4">
            <span 
              class="inline-block px-3 py-1 rounded-full font-semibold text-xs md:text-sm"
              [ngClass]="{
                'bg-yellow-200 text-yellow-800 border border-yellow-400': order.state === 0,
                'bg-blue-200 text-blue-800 border border-blue-400': order.state === 1 || order.state === 2,
                'bg-green-200 text-green-800 border border-green-400': order.state === 3,
                'bg-red-200 text-red-800 border border-red-400': order.state === 4
              }"
            >
              {{ getStateText(order.state) }}
            </span>
          </td>

          <!-- Thanh toán -->
          <td class="px-3 py-3 md:px-6 md:py-4">
            <span 
              class="inline-block px-3 py-1 rounded-full font-semibold text-xs md:text-sm"
              [ngClass]="{
                'bg-green-200 text-green-800 border border-green-400': order.isPaid,
                'bg-red-200 text-red-800 border border-red-400': !order.isPaid
              }"
            >
              {{ order.isPaid ? 'Đã thanh toán' : 'Chưa thanh toán' }}
            </span>
          </td>

          <!-- Tổng giá -->
          <td class="px-3 py-3 md:px-6 md:py-4">
            {{ order.totalAmount | number }} VNĐ
          </td>

          <!-- Thao tác -->
          <td class="px-3 py-3 md:px-6 md:py-4 text-center">
            <button 
              *ngIf="order.orderId != null" 
              (click)="viewOrder(order.orderId!)"
              class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 md:px-4 md:py-2 rounded-md text-xs md:text-sm">
              Chi Tiết
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Phân trang -->
  <div *ngIf="totalPages > 1" class="flex justify-center items-center mt-6 mb-10 gap-4">
    <button 
      (click)="changePage(currentPage - 1)" 
      [disabled]="currentPage === 1"
      class="px-3 py-1 bg-gray-300 rounded disabled:opacity-50"
    >
      Trước
    </button>

    <span>Trang {{ currentPage }} / {{ totalPages }}</span>

    <button 
      (click)="changePage(currentPage + 1)" 
      [disabled]="currentPage === totalPages"
      class="px-3 py-1 bg-gray-300 rounded disabled:opacity-50"
    >
      Tiếp
    </button>
  </div>
</div>

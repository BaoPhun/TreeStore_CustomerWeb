<div class="overflow-x-auto w-full relative z-20 pt-20"> 
    <table class="min-w-full max-w-5xl mx-auto bg-white border border-gray-300 shadow-lg rounded-lg">
        <thead class="sticky top-0 bg-gray-100 z-30 text-sm md:text-base">
            <tr>
                <th class="py-3 px-4 text-left text-gray-700 font-semibold">Hình ảnh</th>
                <th class="py-3 px-4 text-left text-gray-700 font-semibold">Tên sản phẩm</th>
                <th class="py-3 px-4 text-left text-gray-700 font-semibold hidden md:table-cell">Giá</th>
                <th class="py-3 px-4 text-left text-gray-700 font-semibold">Số lượng</th>
                <th class="py-3 px-4 text-left text-gray-700 font-semibold hidden md:table-cell">Tổng</th>
                <th class="py-3 px-4 text-left text-gray-700 font-semibold">Thao tác</th>
            </tr>
        </thead>
        <tbody class="relative z-20 text-sm md:text-base">
            <tr *ngIf="cartItems.length === 0">
                <td colspan="6" class="text-center py-6 text-gray-500">Giỏ hàng của bạn hiện đang trống.</td>
            </tr>
            <tr *ngFor="let item of cartItems" class="border-b border-gray-200 hover:bg-gray-50 transition duration-200">
                <td class="py-3 px-4 flex items-center">
                    <img [src]="item.imageUrl" alt="{{ item.name }}" class="w-16 md:w-24 h-auto rounded-lg shadow-md">
                </td>
                <td class="py-3 px-4 font-medium text-gray-800">{{ item.name }}</td>
                <td class="py-3 px-4 text-green-600 font-semibold hidden md:table-cell">
                    {{ formatCurrency(item.price) }}
                </td>
                <td class="py-3 px-4">
                    <input type="number" [(ngModel)]="item.quantity" min="1" (change)="updateQuantity(item.id, item.quantity)"
                        class="w-16 p-1 md:w-20 md:p-2 border border-gray-300 rounded text-center focus:outline-none focus:ring-2 focus:ring-green-500">
                </td>
                <td class="py-3 px-4 font-semibold text-gray-800 hidden md:table-cell">
                    {{ formatCurrency(item.price * item.quantity) }}
                </td>
                <td class="py-3 px-4">
                    <button (click)="removeItem(item.id)" class="bg-red-500 text-white py-2 px-3 md:px-4 rounded-lg hover:bg-red-600 shadow transition duration-200">
                        Xóa
                    </button>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<div class="mt-6 max-w-5xl mx-auto pb-4 relative z-20" *ngIf="cartItems.length > 0">
    <h3 class="text-lg md:text-xl font-semibold text-right mb-3">
        Tổng cộng: <span class="text-green-600 font-bold">{{ formatCurrency(total) }}</span>
    </h3>
    <div class="flex flex-col md:flex-row justify-end space-y-3 md:space-y-0 md:space-x-4">
        <button (click)="clearCart()" class="bg-red-500 text-white py-2 px-4 md:px-5 rounded-lg hover:bg-red-600 shadow transition duration-200">Xóa giỏ hàng</button>
        <button (click)="buyNow()" class="bg-green-500 text-white py-2 px-4 md:px-5 rounded-lg hover:bg-green-600 shadow transition duration-200">Mua hàng</button>
    </div>
</div>
